import{j as e,r as j,x as h,Q as V,t as b}from"./app-D1kc0eIc.js";import{P as I,T as M,R as o,F as R}from"./Topbar-ZGIDfSAv.js";import{m as q,F as B,c as H}from"./index-9TUAhO9G.js";import{w as L,u as U}from"./Notifier-BlyzZiVb.js";import{T as v}from"./TextInput-C6MowPF3.js";import{z as F}from"./transition-B2XkrRqn.js";import"./github-C2yg7A5L.js";import"./createLucideIcon-DGP9QFMF.js";import"./mail-BpJslJ0z.js";const u=({message:d,className:i=""})=>d?e.jsx("p",{className:`mt-1 text-xs text-red-600 ${i}`,children:d}):null,l=({htmlFor:d,value:i,className:m="",children:t,...c})=>e.jsx("label",{htmlFor:d,className:m,...c,children:i||t});function G({auth:d,projects:i=[],skills:m=[]}){const{user:t}=d,[c,f]=j.useState(!1),[p,N]=j.useState(!1),[y,k]=j.useState(!1),[w,S]=j.useState(!1),{success:x,error:g}=U(),D=()=>{S(!w),document.documentElement.classList.toggle("dark")},a=h({title:"",description:"",technologies:"",github_link:"",demo_link:"",image:null}),r=h({name:"",level:"débutant",category:"Frontend"}),n=h({cv:null}),E=s=>{s.preventDefault(),a.post(route("dashboard.projects.store"),{forceFormData:!0,onSuccess:()=>{a.reset(),f(!1),x("Projet ajouté !")},onError:()=>g("Erreur lors de l'ajout du projet.")})},P=s=>{s.preventDefault(),r.post(route("dashboard.skills.store"),{onSuccess:()=>{r.reset(),N(!1),x("Compétence ajoutée !")},onError:()=>g("Erreur lors de l'ajout de la compétence.")})},_=s=>{s.preventDefault(),n.data.cv&&n.post(route("dashboard.cv.store"),{forceFormData:!0,onSuccess:()=>{n.reset("cv"),x("CV mis à jour !")},onError:()=>g("Erreur lors de la mise à jour du CV.")})},T=s=>{confirm("Supprimer ce projet ?")&&h({}).delete(route("dashboard.projects.destroy",s),{onSuccess:()=>x("Projet supprimé !"),onError:()=>g("Erreur lors de la suppression.")})},z=s=>{confirm("Supprimer cette compétence ?")&&h({}).delete(route("dashboard.skills.destroy",s),{onSuccess:()=>x("Compétence supprimée !"),onError:()=>g("Erreur lors de la suppression.")})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(V,{title:"Dashboard"}),e.jsx(I,{}),e.jsx(q.button,{onClick:D,className:"fixed top-4 right-4 z-50 rounded-full bg-indigo-600 p-2 text-white shadow-md transition hover:bg-indigo-700 dark:bg-gray-800 dark:hover:bg-gray-700",whileHover:{scale:1.1},whileTap:{scale:.95},"aria-label":"Basculer le mode sombre",children:w?e.jsx(B,{size:20}):e.jsx(H,{size:20})}),y&&e.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 lg:hidden",onClick:()=>k(!1),"aria-hidden":"true"}),e.jsx(M,{onMenuClick:()=>k(!0),user:t}),e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:`fixed top-16 left-0 z-40 h-[calc(100vh-4rem)] w-64 transform border-r border-gray-200 bg-white shadow-lg transition-transform duration-300 lg:static lg:translate-x-0 dark:border-gray-700 dark:bg-gray-800 ${y?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:t.photo||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name)}&background=6366f1&color=fff`,alt:"Photo de profil",className:"mx-auto h-24 w-24 rounded-full border-2 border-indigo-500 shadow-md"}),e.jsx("h3",{className:"mt-2 text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.email})]}),e.jsxs("nav",{className:"space-y-2",children:[e.jsx(b,{href:"/",className:"block font-medium text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Accueil"}),e.jsx("a",{href:"#projects",className:"block text-gray-600 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400",children:"Projets"}),e.jsx("a",{href:"#skills",className:"block text-gray-600 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400",children:"Compétences"}),e.jsx("a",{href:"#cv",className:"block text-gray-600 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400",children:"CV"})]}),e.jsxs("div",{className:"rounded-lg bg-gray-100 p-4 dark:bg-gray-700",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Statistiques"}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-indigo-600",children:i.length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Projets"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-indigo-600",children:m.length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Compétences"})]})]})]})]})}),e.jsx("main",{className:"flex-1 p-6 lg:ml-64",children:e.jsxs("div",{className:"mx-auto max-w-6xl space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{href:"/",className:"action-btn",children:"Accueil"}),e.jsx(b,{href:"/profile",className:"action-btn",children:"Profil"})]})]}),e.jsx("section",{className:"glass-card",children:e.jsxs("div",{className:"profile-header",children:[e.jsx("img",{src:t.photo||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name)}&background=6366f1&color=fff`,alt:"Photo de profil",className:"profile-photo"}),e.jsxs("div",{className:"profile-info",children:[e.jsxs("h2",{className:"name",children:["Bonjour, ",t.name]}),e.jsx("p",{className:"status",children:"Espace d'administration"})]})]})}),e.jsxs("div",{className:"dashboard-main-grid",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"glass-card",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Projets"}),e.jsx(o,{onClick:()=>f(!c),className:`action-btn ${c?"bg-red-600 hover:bg-red-700":""}`,children:c?"Annuler":"Nouveau Projet"})]}),e.jsx(F,{show:c,enter:"transition duration-300",enterFrom:"opacity-0 -translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"transition duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-4",children:e.jsxs("form",{onSubmit:E,className:"space-y-4 rounded-lg bg-gray-50 p-4 dark:bg-gray-800",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"title",value:"Titre"}),e.jsx(v,{id:"title",value:a.data.title,onChange:s=>a.setData("title",s.target.value),required:!0}),e.jsx(u,{message:a.errors.title})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"technologies",value:"Technologies"}),e.jsx(v,{id:"technologies",value:a.data.technologies,onChange:s=>a.setData("technologies",s.target.value),placeholder:"React, Laravel..."})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",value:"Description"}),e.jsx("textarea",{id:"description",value:a.data.description,onChange:s=>a.setData("description",s.target.value),className:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700",rows:4,required:!0}),e.jsx(u,{message:a.errors.description})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"github_link",value:"GitHub"}),e.jsx(v,{id:"github_link",value:a.data.github_link,onChange:s=>a.setData("github_link",s.target.value),placeholder:"https://github.com/..."})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"image",value:"Image"}),e.jsx("input",{type:"file",id:"image",onChange:s=>a.setData("image",s.target.files?s.target.files[0]:null),className:"w-full",accept:"image/*"}),e.jsx(u,{message:a.errors.image})]})]}),e.jsx(o,{type:"submit",disabled:a.processing,className:"action-btn",children:"Enregistrer"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[i.map((s,C)=>e.jsxs("div",{className:"glass-card p-4",children:[s.image?e.jsx("img",{src:`/storage/${s.image}`,alt:s.title,className:"h-40 w-full rounded-lg object-cover"}):e.jsx("div",{className:"flex h-40 w-full items-center justify-center rounded-lg bg-gray-200 dark:bg-gray-700",children:"Projet"}),e.jsx("h4",{className:"mt-2 text-lg font-semibold text-gray-900 dark:text-white",children:s.title}),e.jsx("p",{className:"line-clamp-3 text-sm text-gray-600 dark:text-gray-400",children:s.description}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.technologies.split(",").slice(0,3).map(($,A)=>e.jsx("span",{className:"rounded-full bg-indigo-100 px-2 py-1 text-xs text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",children:$.trim()},A))}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[s.github_link&&e.jsx("a",{href:s.github_link,target:"_blank",rel:"noopener noreferrer",className:"action-btn flex-1 text-center",children:"GitHub"}),s.demo_link&&e.jsx("a",{href:s.demo_link,target:"_blank",rel:"noopener noreferrer",className:"action-btn flex-1 text-center",children:"Demo"}),e.jsx(o,{onClick:()=>T(s.id),className:"rounded-full bg-red-600 p-2 text-white hover:bg-red-700",children:e.jsx("span",{className:"material-icons",children:"delete"})})]})]},s.id)),!i.length&&e.jsx("div",{className:"col-span-full p-8 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun projet. Ajoutez-en un !"})})]})]}),e.jsxs("section",{className:"glass-card",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Compétences"}),e.jsx(o,{onClick:()=>N(!p),className:`action-btn ${p?"bg-red-600 hover:bg-red-700":""}`,children:p?"Annuler":"Nouvelle Compétence"})]}),e.jsx(F,{show:p,enter:"transition duration-300",enterFrom:"opacity-0 -translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"transition duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-4",children:e.jsxs("form",{onSubmit:P,className:"space-y-4 rounded-lg bg-gray-50 p-4 dark:bg-gray-800",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",value:"Compétence"}),e.jsx(v,{id:"name",value:r.data.name,onChange:s=>r.setData("name",s.target.value),required:!0}),e.jsx(u,{message:r.errors.name})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"level",value:"Niveau"}),e.jsxs("select",{id:"level",value:r.data.level,onChange:s=>r.setData("level",s.target.value),className:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("option",{value:"débutant",children:"Débutant"}),e.jsx("option",{value:"confirmé",children:"Confirmé"}),e.jsx("option",{value:"expert",children:"Expert"})]})]})]}),e.jsx(o,{type:"submit",disabled:r.processing,className:"action-btn",children:"Enregistrer"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[m.map(s=>e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 capitalize dark:text-gray-400",children:s.level})]}),e.jsx(o,{onClick:()=>z(s.id),className:"rounded-full bg-red-600 p-2 text-white hover:bg-red-700",children:e.jsx("span",{className:"material-icons",children:"delete"})})]}),e.jsx("div",{className:"mt-2 h-2 rounded-full bg-gray-200 dark:bg-gray-600",children:e.jsx("div",{className:`h-2 rounded-full ${s.level==="débutant"?"w-1/3 bg-green-500":s.level==="confirmé"?"w-2/3 bg-blue-500":"w-full bg-purple-500"}`})})]},s.id)),!m.length&&e.jsx("div",{className:"col-span-full p-8 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucune compétence. Ajoutez-en une !"})})]})]})]}),e.jsx("aside",{className:"sticky top-24",children:e.jsxs("section",{className:"glass-card p-6",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold text-gray-900 dark:text-white",children:"CV"}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cv",value:"Nouveau CV (PDF)"}),e.jsx("input",{type:"file",id:"cv",onChange:s=>n.setData("cv",s.target.files?s.target.files[0]:null),className:"w-full",accept:".pdf,.doc,.docx"}),e.jsx(u,{message:n.errors.cv})]}),e.jsx(o,{type:"submit",disabled:n.processing||!n.data.cv,className:"action-btn w-full",children:"Mettre à jour"})]}),t.cv_path&&e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:`/storage/${t.cv_path}`,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Voir mon CV"})})]})})]})]})})]}),e.jsx(R,{})]})}const se=L(G);export{se as default};
